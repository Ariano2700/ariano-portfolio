---
import OcticonThreeBars16 from "@assets/icons/Octicons/OcticonThreeBars16.astro";
import OcticonX12 from "@assets/icons/Octicons/OcticonX12.astro";
import ToggleThemeButton from "./ToggleThemeButton.astro";
---

<div class="flex md:hidden relative">
  <div id="menuIcon" class="block">
    <OcticonThreeBars16 />
  </div>
  <div id="closeIcon" class="hidden">
    <OcticonX12 />
  </div>
  <nav
    id="navMenu"
    class="z-10 gap-3 bg-white rounded-lg shadow-xl absolute -left-[130px] top-11 py-3 px-5 flex-col items-center justify-center text-primary-10 hidden"
  >
    <div
      class="absolute right-1 -top-1.5 w-0 h-0 border-l-8 border-l-transparent border-r-8 border-r-transparent border-b-8 border-b-white"
    >
    </div>
    <div class="text-lg text-nowrap">
      <ul class="flex flex-col gap-5 items-center justify-center">
        <li>
          <a href="#presentation_section" aria-label="Go to home section"
            >Home</a
          >
        </li>
        <li>
          <a href="#projects_section" aria-label="Go to projects section"
            >Projects</a
          >
        </li>
        <li>
          <a href="#about_me_section" aria-label="Go to about me section"
            >About me</a
          >
        </li>
        <li>
          <a
            href="#technologies_section"
            aria-label="Go to technologies section">Technologies</a
          >
        </li>
        <li>
          <a href="#services_section" aria-label="Go to services section"
            >Services</a
          >
        </li>
        <li>
          <a href="#contact_section" aria-label="Go to contact section"
            >Contact</a
          >
        </li>
      </ul>
    </div>
    <ToggleThemeButton />
  </nav>
</div>
<script>
  let open = false;

  function toggleMenu() {
    open = !open;
    const navMenu = document.querySelector("#navMenu");
    const menuIcon = document.querySelector("#menuIcon");
    const closeIcon = document.querySelector("#closeIcon");

    if (open === true) {
      menuIcon?.classList.remove("block");
      menuIcon?.classList.add("hidden");
      closeIcon?.classList.add("block");
      closeIcon?.classList.remove("hidden");
      navMenu?.classList.add("flex");
      navMenu?.classList.remove("hidden");
    } else {
      menuIcon?.classList.add("block");
      menuIcon?.classList.remove("hidden");
      closeIcon?.classList.remove("block");
      closeIcon?.classList.add("hidden");
      navMenu?.classList.add("hidden");
      navMenu?.classList.remove("flex");
    }
  }
  document.addEventListener("DOMContentLoaded", () => {
    const menuIcon = document.querySelector("#menuIcon");
    const closeIcon = document.querySelector("#closeIcon");
    menuIcon?.addEventListener("click", () => {
      toggleMenu();
    });
    closeIcon?.addEventListener("click", () => {
      toggleMenu();
    });
  });
</script>
