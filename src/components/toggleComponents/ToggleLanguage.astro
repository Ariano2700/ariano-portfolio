---
import PeruFlag from "@assets/icons/Flags/PeruFlag.astro";
import EnglangFlag from "@assets/icons/Flags/EnglangFlag.astro";

const pathname = Astro.url.pathname;
const isEnglish = pathname.startsWith("/en");

// Calcula la ruta base sin /en
const basePath = isEnglish ? pathname.replace(/^\/en/, "") || "/" : pathname;
---

<div class="text-lg language-selector gap-2">
  <div class="toggle-switch">
    <a
      href={basePath}
      class={`toggle-option${!isEnglish ? " active" : ""}`}
      aria-label="Español"
      title="Español"
    >
      <PeruFlag class="text-lg" />
      <span>ES</span>
    </a>
    <a
      href={`/en${basePath === "/" ? "" : basePath}`}
      class={`toggle-option${isEnglish ? " active" : ""}`}
      aria-label="English"
      title="English"
    >
      <EnglangFlag class="text-lg" />
      <span>EN</span>
    </a>
  </div>
</div>
<style>
  .language-selector {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
  }
  .toggle-switch {
    display: flex;
    background: #1e293b;
    border-radius: 9999px;
    overflow: hidden;
    border: 1.5px solid #0891b2;
    box-shadow: 0 2px 8px #0002;
  }
  .toggle-option {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    padding: 0.3rem 0.9rem;
    font-size: 1rem;
    color: #cbd5e1;
    background: transparent;
    text-decoration: none;
    transition: background 0.2s, color 0.2s;
    font-weight: 500;
  }
  .toggle-option.active {
    background: linear-gradient(90deg, #06b6d4 60%, #8daff8 100%);
    color: #fff;
    box-shadow: 0 2px 8px #0891b2aa;
  }
  .toggle-option:hover:not(.active) {
    background: #334155;
    color: #fff;
  }
</style>
